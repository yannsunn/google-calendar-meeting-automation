# 🤖 OpenAI APIキー設定手順

AIエージェント版ワークフローが適用されました!

---

## ✅ 適用された改善点

1. **スケジュール**: 毎朝6時に1回実行（1時間ごと→1日1回に変更）
2. **AIエージェント統合**: 自律的に判断・実行
3. **外部参加者なしでも全フロー実行**: 社内会議でも準備項目を提案
4. **Web検索ツール**: AIエージェントが必要に応じて自動使用
5. **会議準備・提案を自動生成**: すべての会議に対応

---

## 🔑 OpenAI APIキーの設定

### Step 1: N8Nワークフローを開く

https://n8n.srv946785.hstgr.cloud/workflow/sQBFAm3od5U20PHG

---

### Step 2: OpenAI認証情報を追加

#### 方法A: 認証情報を新規作成（推奨）

1. **左メニューの「Credentials」をクリック**

2. **「Add Credential」をクリック**

3. **「OpenAI」を検索して選択**

4. **APIキーを入力**
   - Name: `OpenAI API`
   - API Key: あなたのOpenAI APIキー

5. **「Create」をクリック**

---

#### 方法B: ノードから直接設定

1. **ワークフロー画面で「OpenAI Chat Model」ノードをクリック**

2. **「Credential to connect with」の横の「+」をクリック**

3. **APIキーを入力**
   - Name: `OpenAI API`
   - API Key: あなたのOpenAI APIキー

4. **「Save」をクリック**

---

### Step 3: ワークフローを保存

画面右上の「Save」ボタンをクリック

---

## 🎯 新しいワークフローの構造

```
毎朝6時実行
    ↓
Google Calendar API（1週間分のイベント取得）
    ↓
データ整形+外部判定（すべての会議を処理）
    ↓
Supabase保存
    ↓
AIタスク準備
    ├─ 外部参加者あり → 企業分析タスク
    └─ 外部参加者なし → 会議準備タスク
    ↓
AIエージェント 🤖
    ├─ Web検索ツール（必要に応じて自動使用）
    └─ 自律的に情報収集・分析
    ↓
AI出力整形
    ↓
提案保存（Supabase）
    ↓
実行結果
```

---

## 🤖 AIエージェントの動作

### 外部参加者がいる会議:
1. Web検索で企業情報を自動収集
2. 企業の概要・事業・業界を分析
3. 4つの観点から提案を生成:
   - 業務効率化ツール
   - ホームページ作成・改善
   - チャットボット導入
   - AI活用提案
4. 導入メリット、コスト、期間を含む

### 外部参加者がいない会議:
1. 会議の目的と内容を要約
2. 会議前の準備項目をリスト化
3. 会議後のフォローアップ項目を提案

---

## 📊 データベースに保存される情報

### `calendar_events` テーブル
- 会議の基本情報
- 外部参加者情報
- 重要度フラグ

### `proposals` テーブル
- 企業分析結果
- AI提案内容
- Web検索結果
- AIエージェントの完全な出力

---

## ✅ 設定完了後の確認

### テスト実行:
1. ワークフロー画面で「Execute Workflow」をクリック
2. 各ノードが緑のチェックマーク ✅ になることを確認
3. Supabaseで `proposals` テーブルにデータが保存されているか確認

---

## 🚀 完了!

OpenAI APIキーを設定したら、完全自動化されたAI会議準備システムが起動します!

**毎朝6時に自動実行**され、すべての会議に対して:
- 企業情報の自動収集
- AI分析と提案生成
- 会議準備のサポート

が実行されます 🎉
